---
# Compact cluster configuration (3 nodes)
# This file defines settings specific to compact topology

clusterGroup:
  name: compact
  topology: compact
  region: datacenter
  isHubCluster: false
  nodeCount: 3

  # Compact uses ODF storage (override global TrueNAS default)
  storage:
    default:
      provider: odf
      className: ocs-storagecluster-ceph-rbd
    truenas:
      enabled: false  # Disable TrueNAS for compact
    odf:
      enabled: true  # Enable ODF
      nodeCount: 3
      storageClassName: ocs-storagecluster-ceph-rbd
      cephfsStorageClassName: ocs-storagecluster-cephfs
      deviceSets:
        - name: ocs-deviceset
          count: 1
          replica: 3
          dataPVCTemplate:
            spec:
              storageClassName: localblock
              volumeMode: Block
              resources:
                requests:
                  storage: 500Gi
    metallb:
      enabled: false  # OpenShift provides LoadBalancer

  # Common components - use global defaults
  commonComponents:
    externalSecrets:
      enabled: true
      backend: vault  # Might use vault in datacenter
    certManager:
      enabled: true
    nfd:
      enabled: true
    vpa:
      enabled: true
    goldilocks:
      enabled: true
    gatus:
      enabled: true
    customErrorPages:
      enabled: true

  # Regional components
  regionalComponents:
    hub:
      acm:
        enabled: false
      multiclusterEngine:
        enabled: false
    datacenter: {}

  # Application stacks - Compact topology (3 nodes, moderate resources)
  applicationStacks:
    # AI / ML Applications
    ai:
      enabled: false
      apps:
        # - litellm            # AI proxy/router for LLM APIs
        # - ollama             # Local LLM inference server
        # - open-webui         # Web interface for Ollama/LiteLLM

    # Media Management Applications
    media:
      enabled: false
      apps:
        # - bazarr             # Subtitle management
        # - flaresolverr       # Cloudflare bypass proxy
        # - gaps               # Missing movie finder for Plex
        # - huntarr            # Bounty manager for *arr apps
        # - jellyfin           # Alternative media server
        # - jellyseerr         # Request management for Jellyfin
        # - kapowarr           # Comic book collection manager
        # - kavita             # Ebook/comic reader
        # - lidarr             # Music collection manager
        # - metube             # YouTube downloader
        # - overseerr          # Request management for Plex/Jellyfin
        # - pinchflat          # YouTube channel archiver
        # - plex               # Media server (primary)
        # - posterizarr        # Poster/artwork management
        # - prowlarr           # Indexer manager
        # - radarr             # Movie collection manager
        # - readarr            # Ebook collection manager
        # - recyclarr          # TRaSH guides sync for *arr apps
        # - sabnzbd            # Usenet downloader
        # - sonarr             # TV series collection manager
        # - tautulli           # Plex monitoring and statistics

    # Home Automation Applications
    homeAutomation:
      enabled: false
      apps:
        # - emqx-operator      # MQTT broker operator
        # - home-assistant     # Home automation platform
        # - node-red           # Flow-based automation
        # - zwavejs2mqtt       # Z-Wave to MQTT bridge

    # Productivity Applications
    productivity:
      enabled: false
      apps:
        # - bookmarks        # Bookmark manager
        # - cyberchef        # Data transformation tool
        # - excalidraw       # Collaborative whiteboard
        # - it-tools         # Developer utilities collection
        # - startpunkt       # Customizable startpage
        # - terraform-enterprise  # Terraform private registry
        # - todo             # Hierarchical task manager (FastAPI + React)

    # Infrastructure Applications
    infrastructure:
      enabled: false
      apps:
        # - adsb               # Aircraft tracking (FlightAware/ADS-B)
        # - glue-worker        # Custom Python automation workers
        # - paperless-ai       # AI-powered document processing
        # - paperless-gpt      # GPT integration for Paperless
        # - paperless-ngx      # Document management system

  # Backup configuration
  backup:
    kasten:
      enabled: true
